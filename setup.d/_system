### bash setup ###
echo -e "EDITOR=micro\nVISUAL=micro\n" | ${SUDO} tee -a /etc/environment
echo | ${SUDO} tee -a $HOME/.bashrc
echo '. ~/.config/shell/prompt' | ${SUDO} tee -a $HOME/.bashrc
if [ ! $UID = 0 ]; then
    cp -rTv $SCRIPT_DIR/home $HOME/
    echo | tee -a $HOME/.bashrc
    echo '. ~/.config/shell/prompt' | tee -a $HOME/.bashrc
    echo | tee -a $HOME/.bashrc
    echo '. ~/.config/shell/utils_env' | tee -a $HOME/.bashrc
    ln -s $HOME/.config/shell/aliases $HOME/.bash_aliases
fi

### micro ###
cd $HOME
curl https://getmic.ro | bash
${SUDO} mv ./micro /usr/local/bin/
${SUDO} update-alternatives --install /usr/bin/editor editor /usr/local/bin/micro 50

### backports ###
echo "deb http://deb.debian.org/debian $(lsb_release -sc)-backports main contrib non-free" | ${SUDO} tee /etc/apt/sources.list.d/debian-backports.list
echo -e "Package: *\nPin: release a=$(lsb_release -sc)-backports\nPin-Priority: 500\n" \
    | ${SUDO} tee /etc/apt/preferences.d/50backports

${SUDO} apt update
${SUDO} apt -y full-upgrade
### required by php-mysql-nginx ###
${SUDO} apt -y install apt-transport-https lsb-release ca-certificates curl software-properties-common dirmngr gnupg2 debian-archive-keyring sudo rsync
### extras ###
${SUDO} apt -y install zstd p7zip-full ncdu git unzip screenfetch
